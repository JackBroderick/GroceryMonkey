(this["webpackJsonpgrocerymonkey-client"]=this["webpackJsonpgrocerymonkey-client"]||[]).push([[0],{171:function(e,t,a){e.exports=a(363)},176:function(e,t,a){},177:function(e,t,a){},355:function(e,t,a){},360:function(e,t,a){},362:function(e,t,a){},363:function(e,t,a){"use strict";a.r(t);var n=a(10),i=a(11),r=a(6),o=a(13),s=a(12),l=a(169),c=a(0),u=a.n(c),m=a(16),d=a.n(m),h=a(8),f=a(41);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(176);var p=a(365),g=a(366),y=a(156);a(177);alert("production");var E={"Content-Type":"application/json"},b=1,v=2,k=function(e,t){fetch("/endpoints/getmonkeydata",{method:"POST",headers:E,body:JSON.stringify({})}).then((function(e){return e.json()})).then((function(e){e.success?t(e.data):t({})}))},C=function(e,t){fetch("/endpoints/updateuser",{method:"PUT",headers:E,body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){e.success?t(e.user):t({})}))},j=function(e){fetch("/endpoints/getusers",{method:"POST",headers:E}).then((function(e){return e.json()})).then((function(t){t.success?e(t.data):e({})}))},S=function(e,t){fetch("/endpoints/updategroceryitem",{method:"PUT",headers:E,body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){t(e.success)}))},w=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).PIN=void 0,i.PIN=u.a.createRef(),i.state={redoAuth:i.props.isAuthenticated},i.tryPin=i.tryPin.bind(Object(r.a)(i)),i.tryPinQuick=i.tryPinQuick.bind(Object(r.a)(i)),i}return Object(i.a)(a,[{key:"tryPinQuick",value:function(e){4===e.length&&this.tryPin(e)}},{key:"tryPin",value:function(e){var t=this,a=function(e){t.PIN.current&&(t.PIN.current.value=""),e||t.setState((function(){return{redoAuth:!e}}))}.bind(this);this.props.authenticatePin(e,a)}},{key:"render",value:function(){var e=this;return this.props.isAuthenticated?this.props.isAdmin?u.a.createElement(h.a,{to:"/config"}):u.a.createElement(h.a,{to:"/main"}):u.a.createElement("div",{className:"Splash"},u.a.createElement("br",null),u.a.createElement(p.a,{className:"Image",src:"./images/grocerymonkey.jpg"}),u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement("h1",null,"Grocery Monkey"),u.a.createElement("br",null),u.a.createElement("div",{style:{display:"inline-block"}},u.a.createElement(g.a,null,u.a.createElement(y.a,{autoFocus:!0,ref:this.PIN,placeholder:"User PIN","aria-label":"User PIN","aria-describedby":"basic-addon1",onChange:function(){return e.tryPinQuick(e.PIN.current.value)},style:{textAlign:"center",width:"100px"}}),u.a.createElement(g.a.Append,{style:{cursor:"pointer"},onClick:function(){e.tryPin(e.PIN.current.value)}},u.a.createElement(g.a.Text,null,"Login"))),this.state.redoAuth?u.a.createElement(u.a.Fragment,null,u.a.createElement("br",null),u.a.createElement("span",{style:{color:"darkred"}},u.a.createElement("h3",null,"INVALID PIN"))):null))}}]),a}(u.a.Component),I=a(373),O=a(367),P=a(369),N=a(167),A=a(372),U=a(164),T=a(71),D=a(158),L=(a(354),a(355),a(371)),R=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).state={monkeyImage:""},i.getMonkeyImage=i.getMonkeyImage.bind(Object(r.a)(i)),i}return Object(i.a)(a,[{key:"getMonkeyImage",value:function(){return"/images/monkey/monkey"+Math.floor(1+1*Math.random()).toString()+".gif"}},{key:"componentDidMount",value:function(){var e=this;this.setState((function(){return{monkeyImage:e.getMonkeyImage()}}))}},{key:"render",value:function(){return u.a.createElement("div",{style:{width:"90%",height:"50%"}},u.a.createElement(L.a,{animation:!0,centered:!0,show:this.props.show},u.a.createElement(L.a.Header,null,u.a.createElement(L.a.Title,null,"You are a Grocery Monkey!")),u.a.createElement(L.a.Body,{style:{textAlign:"center"}},u.a.createElement("div",{style:{width:"100%}"}},u.a.createElement(p.a,{fluid:!0,roundedCircle:!0,src:this.state.monkeyImage}))),u.a.createElement(L.a.Footer,null,u.a.createElement(O.a,{variant:"secondary",onClick:this.props.monkeyDanceToggle},"More Monkey Stuff"),u.a.createElement(O.a,{variant:"primary",onClick:this.props.logOff},"No More Monkey"))))}}]),a}(u.a.Component),x=a(374),_=a(368),M=a(65),G=a(154),H=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).state={monkeyImage:"./images/monkey/monkey_running.gif",monkeyMonth:G(new Date,"mmmm"),bananaHistory:[]},i.getBananas=i.getBananas.bind(Object(r.a)(i)),i.getBananaHistory=i.getBananaHistory.bind(Object(r.a)(i)),i}return Object(i.a)(a,[{key:"getBananas",value:function(e){var t="";if(e){for(var a=1;a<=e;a++)t+=M.emojify(":banana:");return t}return""}},{key:"getBananaHistory",value:function(e){var t=this,a=function(e){t.setState((function(){return{bananaHistory:e}}))};"monkeys"===e?function(e){fetch("/endpoints/getbananawinnerhistory",{method:"POST",headers:E,body:""}).then((function(e){return e.json()})).then((function(t){t.success?e(t.data):e({})}))}(a.bind(this)):"mooches"===e?function(e){fetch("/endpoints/getbananamoochhistory",{method:"POST",headers:E,body:""}).then((function(e){return e.json()})).then((function(t){t.success?e(t.data):e({})}))}(a.bind(this)):this.setState((function(){return{monkeyMonth:G(new Date,"mmmm")}}))}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{style:{width:"90%",height:"95%"}},u.a.createElement(L.a,{animation:!0,centered:!0,show:this.props.show},u.a.createElement(L.a.Header,null,u.a.createElement(L.a.Title,null,u.a.createElement(p.a,{fluid:!0,roundedCircle:!0,width:"60",height:"60",src:this.state.monkeyImage}),"The Monkey Race!")),u.a.createElement(L.a.Body,{style:{textAlign:"center"}},u.a.createElement(x.a,{defaultActiveKey:"current",id:"main_tab",onSelect:function(t){e.getBananaHistory(t)}},u.a.createElement(_.a,{eventKey:"current",title:this.state.monkeyMonth},u.a.createElement("div",{style:{width:"100%}"}},u.a.createElement(P.a,null,this.props.users.map((function(t,a){return u.a.createElement(N.a,{key:a,style:{display:"flex",alignItems:"center"}},u.a.createElement("div",{style:{width:"20%",textAlign:"center",display:"inline-block"}},u.a.createElement(p.a,{width:"40",height:"40",src:"./images/users/"+t.user_id+".jpg",roundedCircle:!0}),u.a.createElement("br",null),t.name),u.a.createElement("div",{style:{width:"80%",textAlign:"left",display:"inline-block"}},"Banana Count: ("+t.banana_count+")  "+e.getBananas(t.banana_count)))}))))),u.a.createElement(_.a,{eventKey:"monkeys",title:"Monkeys"},u.a.createElement(B,{label:"Bananas",emoji:":banana:",gif_image:"./images/star.gif",data:this.state.bananaHistory})),u.a.createElement(_.a,{eventKey:"mooches",title:"Mooches"},u.a.createElement(B,{label:"Requests",emoji:":speak_no_evil:",gif_image:"./images/question.gif",data:this.state.bananaHistory})))),u.a.createElement(L.a.Footer,null,u.a.createElement(O.a,{variant:"secondary",onClick:this.props.monkeyRaceToggle},"More Monkey Stuff"),u.a.createElement(O.a,{variant:"primary",onClick:this.props.logOff},"No More Monkey"))))}}]),a}(u.a.Component),B=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return u.a.createElement("div",{style:{width:"100%"}},u.a.createElement(P.a,null,this.props.data.map((function(t,a){return u.a.createElement(N.a,{key:a,style:{display:"flex",alignItems:"center"}},u.a.createElement("div",{style:{width:"22%",textAlign:"center",display:"inline-block"}},u.a.createElement(p.a,{width:"50",height:"50",src:e.props.gif_image}),u.a.createElement("br",null),G(new Date(t.banMonth),"mmmm")),u.a.createElement("div",{style:{width:"32%",textAlign:"center",display:"inline-block",cursor:"pointer"}},u.a.createElement(p.a,{width:"40",height:"40",src:"./images/users/"+t.banUserID+".jpg",roundedCircle:!0}),u.a.createElement("br",null),t.banUserName),u.a.createElement("div",{style:{width:"46%",textAlign:"center",display:"inline-block"}},e.props.label+": "+M.emojify(e.props.emoji)+"("+t.banCount+")"))}))))}}]),a}(u.a.Component),V=H,J=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return u.a.createElement("div",{style:{width:"90%",height:"50%"}},u.a.createElement(L.a,{animation:!0,centered:!0,show:this.props.itemPhotoLocation,size:"xl",onHide:function(){e.props.showItemToggle()}},u.a.createElement(L.a.Body,{style:{textAlign:"center"}},u.a.createElement("div",{style:{width:"100%}"}},u.a.createElement(p.a,{fluid:!0,style:{width:"100%",height:"100%"},src:this.props.itemPhotoLocation,onClick:function(){e.props.showItemToggle()}})))))}}]),a}(u.a.Component),z=a(43),F=a.n(z),K=a(25),W=a(65),X=function(e){e.isAuthenticated;var t={item:"",code:""},a=Object(c.useRef)(null),n=Object(c.useRef)(null),i=Object(c.useState)([]),r=Object(K.a)(i,2),o=r[0],s=r[1],l=Object(c.useState)(""),m=Object(K.a)(l,2),d=m[0],h=m[1],f=Object(c.useState)(t),p=Object(K.a)(f,2),y=p[0],v=p[1],C=Object(c.useState)(!1),j=Object(K.a)(C,2),w=j[0],I=j[1],O=Object(c.useState)(!1),U=Object(K.a)(O,2),T=U[0],D=U[1];function L(){k(0,(function(e){e?(s(e.distinctGroceryListItems),v(t)):s([])}))}function R(e){var a,n;window.confirm("Delete "+e.item+" from the list of grocery items?\n\nThis cannot be undone")&&(a=e,n=function(e){e?(v(t),L()):alert("Error deleting grocery item")},fetch("/endpoints/deletegroceryitem",{method:"DELETE",headers:E,body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){n(e.success)})))}return Object(c.useEffect)((function(){L()}),[]),Object(c.useEffect)((function(){n.current&&n.current.focus()})),u.a.createElement(u.a.Fragment,null,T?u.a.createElement(Q,{show:T,toggleEmojiConfig:function(){L(),D(!T)},selectedItem:y,mode:b}):u.a.createElement(u.a.Fragment,null),u.a.createElement("div",{style:{width:"100%"}},u.a.createElement("br",null),u.a.createElement(g.a,null,u.a.createElement(A.a.Control,{ref:a,onChange:function(){v(t),a.current&&h(a.current.value)},placeholder:"Enter Filter Criteria"}),u.a.createElement(g.a.Append,null,u.a.createElement(g.a.Text,{onClick:function(){a.current&&(h(""),a.current.value="")},style:{cursor:"pointer"}},"X")))),u.a.createElement("br",null),o.length?u.a.createElement(P.a,{style:{width:"100%"},variant:"flush"},o.filter((function(e){return new RegExp("\\b"+d,"i").test(e.item)})).map((function(e,t){return u.a.createElement(N.a,{key:t,style:{display:"flex",width:"100%",alignItems:"center",backgroundColor:JSON.stringify(y)===JSON.stringify(e)?"Gainsboro":"Transparent"}},u.a.createElement("div",{style:{width:"10%",textAlign:"left"}},u.a.createElement("label",{onClick:function(){v(e),D(!0)},style:{cursor:"pointer"}},W.emojify(e.code))),u.a.createElement("div",{style:{width:"78%",textAlign:"left"},onClick:function(){v(e),I(!1)}},JSON.stringify(e)===JSON.stringify(y)?u.a.createElement("input",{type:"text",ref:n,onChange:function(){n.current&&y.item!==n.current.value&&I(!0)},defaultValue:e.item,style:{width:"100%",border:0,backgroundColor:"Transparent",color:"darkblack"}}):u.a.createElement("label",null,u.a.createElement("span",{style:{visibility:"hidden"}},"x"),e.item)),u.a.createElement("div",{style:{width:"10%",textAlign:"right"}},JSON.stringify(e)===JSON.stringify(y)?w?u.a.createElement("label",{onClick:function(){!function(){if(n.current){var e={item:y.item,code:y.code,itemUpdate:n.current.value};S(e,(function(e){e?L():alert("Error updating grocery item")}))}}()},style:{cursor:"pointer"}},W.emojify(":floppy_disk:")):u.a.createElement(u.a.Fragment,null):u.a.createElement("label",{onClick:function(){R(e)},style:{cursor:"pointer"}},W.emojify(":wastebasket:"))))}))):u.a.createElement("label",null,"No Items"))},Q=function(e){var t=Object(c.useRef)(null),a=Object(c.useState)(W.search("")),n=Object(K.a)(a,2),i=n[0],r=n[1];return u.a.createElement(L.a,{size:"lg",show:e.show,scrollable:!0,onHide:function(){e.toggleEmojiConfig()}},u.a.createElement(L.a.Header,{closeButton:!0},u.a.createElement(L.a.Title,null,e.mode===b?e.selectedItem.item+": "+W.emojify(e.selectedItem.code):"Select New emoji")),u.a.createElement(L.a.Body,null,i.length?i.map((function(t,a){return u.a.createElement("label",{key:a,style:{fontSize:"40px",cursor:"pointer"},onClick:function(){!function(t){if(e.mode===b){if(window.confirm("Make the following emoji change?\n\n"+e.selectedItem.item+": "+t.emoji)){var a={item:e.selectedItem.item,code:":"+t.key+":",itemUpdate:e.selectedItem.item};S(a,(function(t){t?e.toggleEmojiConfig():alert("Error updating grocery items")}))}}else e.mode===v&&e.selectNewEmoji&&e.selectNewEmoji(t)}(t)},title:t.key},t.emoji)})):u.a.createElement("label",null,"No matches found")),u.a.createElement(L.a.Footer,null,u.a.createElement(A.a,{onSubmit:function(e){!function(e){e.preventDefault(),t.current&&(r(W.search(t.current.value.toLowerCase())),t.current.value="",window.scrollTo(0,0))}(e)}},u.a.createElement(g.a,null,u.a.createElement(A.a.Control,{ref:t,placeholder:"Enter Search Criteria"}),u.a.createElement(g.a.Append,null,u.a.createElement(O.a,{type:"submit"},"Search"))))))},q=function(){var e=Object(c.useRef)(null),t={emoji:"",key:""},a=Object(c.useState)(""),n=Object(K.a)(a,2),i=n[0],r=n[1],o=Object(c.useState)([]),s=Object(K.a)(o,2),l=s[0],m=s[1],d=Object(c.useState)(t),h=Object(K.a)(d,2),f=h[0],p=h[1],y=Object(c.useState)(!1),b=Object(K.a)(y,2),k=b[0],C=b[1];function j(a){a.preventDefault(),function(e,t){fetch("/endpoints/createemojilookup",{method:"PUT",headers:E,body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){t(e.success)}))}({code:":"+f.key+":",key:i.toLowerCase()},(function(a){a?(e&&e.current&&(e.current.value=""),p(t),w()):alert("Error adding emoji lookup")}))}function S(e){var t,a;window.confirm("Delete the below emoji lookup?\n\n"+e.key+": "+W.emojify(e.code))&&(t=e,a=function(e){e?w():alert("Error deleting emoji lookup")},fetch("/endpoints/deleteemojilookup",{method:"DELETE",headers:E,body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){a(e.success)})))}function w(){var e;e=function(e){m(e)},fetch("/endpoints/getemojilookup",{method:"POST",headers:E}).then((function(e){return e.json()})).then((function(t){t.success?e(t.data):e({})}))}return Object(c.useEffect)((function(){w()}),[]),u.a.createElement(u.a.Fragment,null,u.a.createElement(Q,{show:k,toggleEmojiConfig:function(){C(!k)},selectedItem:{item:"",code:""},mode:v,selectNewEmoji:function(e){p(e),C(!1)}}),u.a.createElement("div",{style:{width:"100%"}},u.a.createElement("br",null),u.a.createElement(A.a,{onSubmit:function(e){j(e)}},u.a.createElement(g.a,null,u.a.createElement(g.a.Prepend,null,u.a.createElement(g.a.Text,{onClick:function(){C(!0)}},f.emoji.length?f.emoji:"...")),u.a.createElement(A.a.Control,{ref:e,placeholder:"Enter New emoji Key",onChange:function(){!function(){var t=e&&e.current?e.current.value:"";r(t)}()}}),u.a.createElement(g.a.Append,null,u.a.createElement(O.a,{type:"submit",disabled:0===i.length||0===f.emoji.length},"New")))),u.a.createElement("br",null)),l.length?u.a.createElement(P.a,{style:{width:"100%"},variant:"flush"},l.map((function(e,t){return u.a.createElement(N.a,{key:t,style:{display:"flex",width:"100%",alignItems:"center"}},u.a.createElement("div",{style:{width:"10%",textAlign:"left"}},W.emojify(e.code)),u.a.createElement("div",{style:{width:"78%",textAlign:"center"}},e.key),u.a.createElement("div",{style:{width:"10%",textAlign:"right"}},u.a.createElement("label",{onClick:function(){S(e)}},W.emojify(":wastebasket:"))))}))):u.a.createElement("label",null,"No emoji Match Keys"))},Y=a(65),$=a(359),Z=a(154),ee=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).newItem=void 0,i.addItem=void 0,i.state={isAuthenticated:e.isAuthenticated,user:e.user,monkeyDance:!1,monkeyRace:!1,monkeyItemPhoto:null,ui:{updateUser:!1,monkeyChange:!1,monkeyLoaded:!1,showCamera:!1,photoTaken:!1,itemPhoto:null,itemStatusList:[],distinctItems:[],users:[],emojiLookup:[]},monkeyData:[],emojiConfig:!1,selectedEmoji:{item:"",code:""},selectedEmojiIndex:-1},i.newItem=u.a.createRef(),i.addItem=u.a.createRef(),i.monkeyItemAction=i.monkeyItemAction.bind(Object(r.a)(i)),i.monkeyItemAction_Do=i.monkeyItemAction_Do.bind(Object(r.a)(i)),i.lookupStatus=i.lookupStatus.bind(Object(r.a)(i)),i.addMonkeyItem=i.addMonkeyItem.bind(Object(r.a)(i)),i.monkeyDo=i.monkeyDo.bind(Object(r.a)(i)),i.monkeyAll=i.monkeyAll.bind(Object(r.a)(i)),i.monkeyDanceToggle=i.monkeyDanceToggle.bind(Object(r.a)(i)),i.monkeyRaceToggle=i.monkeyRaceToggle.bind(Object(r.a)(i)),i.getBananaCount=i.getBananaCount.bind(Object(r.a)(i)),i.onTakePhoto=i.onTakePhoto.bind(Object(r.a)(i)),i.toggleCamera=i.toggleCamera.bind(Object(r.a)(i)),i.getEmojiMatch=i.getEmojiMatch.bind(Object(r.a)(i)),i.changeEmoji=i.changeEmoji.bind(Object(r.a)(i)),i.changeSelectedEmoji=i.changeSelectedEmoji.bind(Object(r.a)(i)),i}return Object(i.a)(a,[{key:"getEmojiMatch",value:function(e){var t=this.state.ui.distinctItems.find((function(t){return t.item===e}));if(t)return t.code;var a=e.toLowerCase();"s"===a.substr(a.length-1)&&(a=a.slice(0,-1));var n=this.state.ui.emojiLookup.find((function(e){return a.includes(e.key)}));if(n)return n.code;var i=Y.search(a);return i.length?":"+i[0].key+":":":shopping_trolley:"}},{key:"onTakePhoto",value:function(e){var t=this.state.ui;t.photoTaken=!0,t.itemPhoto=e,t.showCamera=!1,this.setState((function(){return{ui:t}}))}},{key:"getBananaCount",value:function(e){var t;return(t=this.state.ui.users.filter((function(t){return t.user_id===e}))).length?t[0].banana_count:0}},{key:"lookupStatus",value:function(e){var t;return t=this.state.ui.itemStatusList.filter((function(t){return t.statusID===parseInt(e)})),t.length?{actionType:t[0].action_type,status:t[0].status,status_verb:t[0].status_verb,status_active:t[0].status_active}:{actionType:0,status:0,status_verb:"",status_active:!1}}},{key:"monkeyItemAction",value:function(e,t){e.preventDefault(),this.monkeyItemAction_Do(e.target.value,t)}},{key:"monkeyItemAction_Do",value:function(e,t){var a=this,n=t,i=this.state.monkeyData,r=this.lookupStatus(e);i[n].itemActionType=r.actionType,i[n].itemStatus=r.status,i[n].itemStatusID=parseInt(e),i[n].itemStatusVerb=r.status_verb,i[n].itemStatusActive=r.status_active,i[n].itemUserID=this.state.user.user_id,i[n].itemUserName=this.state.user.name,i[n].itemChanged=!0,this.setState((function(){return{monkeyData:i,ui:{updateUser:a.state.ui.updateUser,itemStatusList:a.state.ui.itemStatusList,distinctItems:a.state.ui.distinctItems,users:a.state.ui.users,monkeyChange:!0,monkeyLoaded:!0,showCamera:!1,photoTaken:!1,itemPhoto:null,emojiLookup:a.state.ui.emojiLookup}}}))}},{key:"getMonkeyData",value:function(){var e=this;k(this.state.isAuthenticated,function(t){for(var a=[],n=0;n<t.groceryListItems.length;n++)a.push({itemNew:!1,itemActionType:0,itemID:t.groceryListItems[n].grocery_list_id,itemDate:t.groceryListItems[n].date,itemName:t.groceryListItems[n].item,itemCount:t.groceryListItems[n].count,itemCode:t.groceryListItems[n].code,itemNotes:t.groceryListItems[n].notes,itemStatusID:t.groceryListItems[n].status_id,itemStatus:t.groceryListItems[n].status,itemStatusVerb:t.groceryListItems[n].status_verb,itemStatusActive:t.groceryListItems[n].status_active,itemUserID:t.groceryListItems[n].user_id,itemUserName:t.groceryListItems[n].username,itemChanged:!1,itemPhoto:t.groceryListItems[n].photo,itemPhotoURI:t.groceryListItems[n].photo_location});var i={updateUser:!1,monkeyChange:!1,monkeyLoaded:!0,showCamera:!1,photoTaken:!1,itemPhoto:null,itemStatusList:t.groceryItemStatus,distinctItems:t.distinctGroceryListItems,users:t.users,emojiLookup:t.emojilookup};e.setState((function(){return{monkeyData:a,ui:i}}))}.bind(this))}},{key:"addMonkeyItem",value:function(e){var t=this;if(e.length>0||this.state.ui.photoTaken){var a,n=(e.length?e:"Photo Only").split(","),i=this.state.monkeyData,r="",o=0,s="",l=$();a=(r=n[0].replace(l,"")).charAt(0).toUpperCase()+r.slice(1).toLowerCase(),2===n.length?o=n[1].length?parseInt(n[1]):0:3===n.length&&(o=parseInt(n[1]),s=n[2]),i.push({itemNew:!0,itemName:a,itemCount:o,itemNotes:s,itemStatusID:1,itemStatus:"NEW",itemStatusVerb:"NEEDS",itemStatusActive:!0,itemActionType:1,itemUserID:this.state.user.user_id,itemUserName:this.state.user.name,itemCode:this.getEmojiMatch(a),itemDate:Z(new Date,"yyyy-mm-dd HH:MM:ss"),itemID:0,itemChanged:!1,itemPhoto:this.state.ui.photoTaken,itemPhotoURI:this.state.ui.photoTaken?this.state.ui.itemPhoto:null}),this.newItem.getInstance().clear(),this.setState((function(){return{monkeyData:i,ui:{updateUser:t.state.ui.updateUser,itemStatusList:t.state.ui.itemStatusList,distinctItems:t.state.ui.distinctItems,users:t.state.ui.users,monkeyChange:!0,monkeyLoaded:!0,showCamera:!1,photoTaken:!1,itemPhoto:null,emojiLookup:t.state.ui.emojiLookup}}}))}}},{key:"monkeyDo",value:function(){var e,t,a=this;if(this.state.ui.monkeyChange){var n={userName:this.state.user.name,userID:this.state.user.user_id,monkeyData:this.state.monkeyData};console.log(n),e=n,t=function(e){e?(a.getMonkeyData(),a.setState((function(){return{monkeyDance:!0}}))):alert("Error updating database")},fetch("/endpoints/updatemonkeydata",{method:"PUT",headers:E,body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){e.success?t(!0):t(!1)}))}else this.props.logOff()}},{key:"monkeyAll",value:function(){for(var e=this,t=this.state.monkeyData,a=0;a<t.length;a++){var n=this.state.ui.itemStatusList[this.state.ui.itemStatusList.length-1].statusID,i=this.lookupStatus(n.toString());t[a].itemActionType=i.actionType,t[a].itemStatus=i.status,t[a].itemStatusID=n,t[a].itemStatusVerb=i.status_verb,t[a].itemStatusActive=i.status_active,t[a].itemUserID=this.state.user.user_id,t[a].itemUserName=this.state.user.name,t[a].itemChanged=!0}this.setState((function(){return{monkeyData:t,ui:{updateUser:e.state.ui.updateUser,itemStatusList:e.state.ui.itemStatusList,distinctItems:e.state.ui.distinctItems,users:e.state.ui.users,monkeyChange:!0,monkeyLoaded:!0,showCamera:!1,photoTaken:!1,itemPhoto:null,emojiLookup:e.state.ui.emojiLookup}}}))}},{key:"toggleCamera",value:function(e){var t=this.state.ui;t.showCamera=e,t.photoTaken=!1,t.itemPhoto=null,this.setState((function(){return{ui:t}}))}},{key:"changeSelectedEmoji",value:function(e){var t=this;e>=0&&this.setState((function(){return{emojiConfig:!0,selectedEmoji:{code:t.state.monkeyData[e].itemCode,item:t.state.monkeyData[e].itemName},selectedEmojiIndex:e}}))}},{key:"changeEmoji",value:function(e){var t=this.state.monkeyData;t[this.state.selectedEmojiIndex].itemCode=":"+e.key+":",this.setState((function(){return{emojiConfig:!1,monkeyData:t,selectedEmoji:{code:"",item:""},selectedEmojiIndex:-1}}))}},{key:"monkeyDanceToggle",value:function(){var e=this;this.setState((function(){return{monkeyDance:!e.state.monkeyDance}}))}},{key:"monkeyRaceToggle",value:function(){var e=this;this.setState((function(){return{monkeyRace:!e.state.monkeyRace}}))}},{key:"componentDidMount",value:function(){this.getMonkeyData()}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"Main",style:{display:"inline-block"}},u.a.createElement(R,{show:this.state.monkeyDance,monkeyDanceToggle:this.monkeyDanceToggle,logOff:this.props.logOff}),u.a.createElement(V,{show:this.state.monkeyRace,users:this.state.ui.users,monkeyRaceToggle:this.monkeyRaceToggle,logOff:this.props.logOff}),u.a.createElement(J,{itemPhotoLocation:this.state.monkeyItemPhoto,showItemToggle:function(){e.setState((function(){return{monkeyItemPhoto:null}}))}}),u.a.createElement(Q,{show:this.state.emojiConfig,toggleEmojiConfig:function(){e.setState((function(){return{emojiConfig:!e.state.emojiConfig}}))},mode:v,selectedItem:this.state.selectedEmoji,selectNewEmoji:this.changeEmoji}),u.a.createElement(I.a,{fixed:"top",sticky:"top",bg:"light",expand:"xl",style:{textAlign:"left",verticalAlign:"middle",flexDirection:"row"},onToggle:function(){e.toggleCamera(!1)}},u.a.createElement(I.a.Brand,null,u.a.createElement(p.a,{src:"/images/favicon.ico",style:{width:"30px",height:"30px",cursor:"pointer"},onClick:function(){return e.props.logOff()}}),u.a.createElement("span",{style:{visibility:"hidden"}},"X"),u.a.createElement("label",null,"   Grocery Monkey - "+this.state.user.name)),u.a.createElement(I.a.Toggle,{"aria-controls":"basic-navbar-nav"}),u.a.createElement(I.a.Collapse,{id:"basic-navbar-nav",style:{width:"100%"}},u.a.createElement("div",{style:{width:"100%",display:"flex",textAlign:"left",float:"left",clear:"left"}},u.a.createElement(g.a,{style:{width:"100%"}},u.a.createElement(g.a.Prepend,null,u.a.createElement(O.a,{variant:this.state.ui.photoTaken?"primary":"outline-primary",onClick:function(){e.toggleCamera(!e.state.ui.showCamera)}},u.a.createElement(p.a,{roundedCircle:!0,src:"/images/camera.png",style:{width:"20px",height:"20px",cursor:"pointer"}}))),u.a.createElement(D.Typeahead,{id:"groceryTypeahead",selectHintOnEnter:!0,options:this.state.ui.distinctItems.map((function(e,t){return Y.emojify(e.code)+e.item})),placeholder:"Item, Quantity, Notes",clearButton:!0,labelKey:"item",emptyLabel:"",ref:function(t){return e.newItem=t}}),u.a.createElement(g.a.Append,null,u.a.createElement(O.a,{variant:"outline-success",ref:this.addItem,onClick:function(){return e.addMonkeyItem(e.newItem.getInstance().getInput().value)}},"Add")))))),u.a.createElement("div",null,this.state.ui.showCamera?u.a.createElement("div",{style:{width:"100%",height:"25%"}},u.a.createElement(F.a,{onTakePhoto:function(t){e.onTakePhoto(t)},imageType:z.IMAGE_TYPES.JPG,imageCompression:.97,isMaxResolution:!1,idealFacingMode:z.FACING_MODES.ENVIRONMENT,isDisplayStartCameraError:!0,isImageMirror:!1}),u.a.createElement("br",null)):null,this.state.monkeyData.length?u.a.createElement(P.a,null,this.state.monkeyData.map((function(t,a){return u.a.createElement(N.a,{key:a,style:{display:"flex",alignItems:"center",backgroundColor:e.state.monkeyData[a].itemChanged?"Gainsboro":"Transparent"}},u.a.createElement("div",{style:{width:"10%",textAlign:"center",display:"inline-block",backgroundColor:"Transparent",cursor:t.itemPhoto?"pointer":"default"}},u.a.createElement(p.a,{className:"list_profile_img",src:t.itemPhoto?t.itemNew?t.itemPhotoURI:"./images/items/"+t.itemPhotoURI+".jpg":"./images/users/"+t.itemUserID+".jpg#"+(new Date).getTime(),roundedCircle:!0,onClick:function(){e.setState((function(){return{monkeyItemPhoto:t.itemPhoto?t.itemNew?t.itemPhotoURI:"./images/items/"+t.itemPhotoURI+".jpg":"./images/users/"+t.itemUserID+".jpg#"+(new Date).getTime()}}))}}),u.a.createElement("br",null),t.itemUserName),u.a.createElement("div",{style:{width:"60%",textAlign:"center",display:"inline-block"}},u.a.createElement("label",{style:{cursor:"pointer"},onClick:function(){e.changeSelectedEmoji(a)}},Y.emojify(t.itemCode)),u.a.createElement("label",{style:{cursor:"pointer"},onClick:e.state.monkeyData[a].itemNew?function(){}:function(){e.monkeyItemAction_Do(e.state.ui.itemStatusList.length.toString(),a)}},u.a.createElement("span",{style:{visibility:"hidden"}},"i")," ",t.itemName+(t.itemCount?" ("+t.itemCount+")":""),u.a.createElement("br",null),t.itemNotes)),u.a.createElement("div",{style:{width:"30",textAlign:"right",display:"inline-block"}},u.a.createElement(A.a,null,u.a.createElement(A.a.Control,{as:"select",value:t.itemStatusID.toString(),onChange:function(t){return e.monkeyItemAction(t,a)}},e.state.ui.itemStatusList.filter((function(a){var n=e.state.user.user_id===t.itemUserID||a.action_sameuser;return t.itemNew?a.action_new&&n:n})).map((function(e,t){return u.a.createElement("option",{key:t,value:e.statusID.toString()}," ",e.status)}))))))}))):this.state.ui.monkeyLoaded&&!this.state.ui.showCamera?u.a.createElement("div",{style:{width:"100%",alignContent:"center",textAlign:"center"}},u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement(p.a,{id:"sad_fridge",src:"./images/sad_fridge.gif"}),u.a.createElement("h4",null,"Ain't nobody need nothin....")):null,u.a.createElement("br",null),u.a.createElement("br",null)),u.a.createElement(I.a,{bg:"dark",variant:"dark",sticky:"bottom",fixed:"bottom"},u.a.createElement(U.a,{style:{textAlign:"left",width:"32%"}},u.a.createElement("div",{style:{width:"100%",verticalAlign:"center"}},u.a.createElement(T.a,{as:f.b,to:"/user"},u.a.createElement(p.a,{alt:"",src:"./images/users/"+this.state.user.user_id+".jpg#"+(new Date).getTime(),width:"40",height:"40",className:"profile_Image",roundedCircle:!0})),u.a.createElement("span",{style:{visibility:"hidden"}},"X"),u.a.createElement("span",{style:{color:"white",fontWeight:"bold",cursor:"pointer"},onClick:function(){return e.monkeyRaceToggle()}},Y.emojify(":banana:")+"("+this.getBananaCount(this.state.user.user_id)+")"))),u.a.createElement(U.a,{style:{textAlign:"right",width:"68%"}},u.a.createElement("div",{style:{width:"100%",textAlign:"right"}},u.a.createElement(O.a,{variant:"light",onClick:function(){return e.monkeyAll()}},"Monkey All"),u.a.createElement("span",null,"  "),u.a.createElement(O.a,{variant:"light",onClick:function(){return e.monkeyDo()}},this.state.ui.monkeyChange?"Monkey Do":"Logoff")))))}}]),a}(u.a.Component),te=a(375),ae=a(370),ne=a(168),ie=(a(360),a(361),function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).userSelfieSubmit=void 0,i.userName=void 0,i.PIN=void 0,i.email=void 0,i.sms=void 0,i.notify=void 0,i.userSelfieSubmit=u.a.createRef(),i.userName=u.a.createRef(),i.PIN=u.a.createRef(),i.email=u.a.createRef(),i.sms=u.a.createRef(),i.notify=u.a.createRef(),i.state={changeUser:!1,newSelfie:!1,userSelfie:"./images/users/"+e.user.user_id+".jpg#"+(new Date).getTime(),selfieChange:!1},i.needSave=i.needSave.bind(Object(r.a)(i)),i.updateUserLocal=i.updateUserLocal.bind(Object(r.a)(i)),i.toggleSelfie=i.toggleSelfie.bind(Object(r.a)(i)),i.onTakePhoto=i.onTakePhoto.bind(Object(r.a)(i)),i}return Object(i.a)(a,[{key:"needSave",value:function(){this.state.changeUser||this.setState((function(){return{changeUser:!0}}))}},{key:"updateUserLocal",value:function(e){var t=this;e.preventDefault();var a={user_id:this.props.user.user_id,name:this.userName.current.value,pin:this.PIN.current.value,email:this.email.current.value,sms:this.sms.current.value,notify:this.notify.current.checked};this.state.selfieChange&&function(e,t,a){var n={production:!"".length,userName:e,dataURI:t};fetch("/endpoints/updateuserselfie",{method:"POST",headers:E,body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){a(e.success)}))}(this.props.user.user_id+"",this.state.userSelfie,(function(e){console.log("File uploaded: "+e)})),this.props.updateUser(a,(function(){return t.setState((function(){return{changeUser:!1,selfieChange:!1}}))}))}},{key:"onTakePhoto",value:function(e){this.setState((function(){return{userSelfie:e,newSelfie:!1,changeUser:!0,selfieChange:!0}}))}},{key:"toggleSelfie",value:function(){var e=this;this.setState((function(){return{newSelfie:!e.state.newSelfie}}))}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{style:{width:"100%",textAlign:"center"}},u.a.createElement("div",{style:{width:"90%",display:"inline-block"}},u.a.createElement(re,{show:this.state.newSelfie,user:this.props.user,onTakePhoto:this.onTakePhoto,toggleSelfie:this.toggleSelfie}),u.a.createElement("br",null),u.a.createElement(A.a,{onSubmit:this.updateUserLocal},u.a.createElement(te.a,{bg:"light",style:{width:"100%",textAlign:"left"}},u.a.createElement(te.a.Header,null,u.a.createElement("div",{style:{width:"100%",display:"inline-block"}},u.a.createElement("div",{style:{display:"inline-block",textAlign:"left",width:"50%"}},u.a.createElement(p.a,{roundedCircle:!0,style:{width:"40px",height:"40px",cursor:"pointer"},src:this.state.userSelfie,onClick:function(){e.toggleSelfie()}}),u.a.createElement("span",{style:{visibility:"hidden"}},"X"),u.a.createElement("span",{style:{fontWeight:"bold"}},this.props.user.name)),u.a.createElement("div",{style:{display:"inline-block",width:"50%",textAlign:"right"}},u.a.createElement(A.a.Group,null,u.a.createElement(f.b,{to:"/main"},u.a.createElement(O.a,null,"Back")),u.a.createElement("span",{style:{visibility:"hidden"}},"  "),u.a.createElement(O.a,{disabled:!this.state.changeUser,type:"submit"},"Save"))))),u.a.createElement(te.a.Body,null,u.a.createElement(A.a.Group,{as:ae.a,controlId:"formHorizontalName"},u.a.createElement(A.a.Label,{column:!0,sm:2},"User Name"),u.a.createElement(ne.a,{sm:10},u.a.createElement(A.a.Control,{ref:this.userName,onChange:function(){return e.needSave()},placeholder:"User Name",defaultValue:this.props.user.name}))),u.a.createElement(A.a.Group,{as:ae.a,controlId:"formHorizontalPIN"},u.a.createElement(A.a.Label,{column:!0,sm:2},"PIN"),u.a.createElement(ne.a,{sm:10},u.a.createElement(A.a.Control,{ref:this.PIN,onChange:function(){return e.needSave()},type:"password",placeholder:"PIN",defaultValue:this.props.user.pin}))),u.a.createElement(A.a.Group,{as:ae.a,controlId:"formHorizontalCheck"},u.a.createElement(ne.a,{sm:{span:10,offset:2}},u.a.createElement(A.a.Check,{ref:this.notify,onChange:function(){return e.needSave()},label:"Grocery Monkey Notifications",defaultChecked:this.props.user.notify}))),u.a.createElement(A.a.Group,{as:ae.a,controlId:"formHorizontalEmail"},u.a.createElement(A.a.Label,{column:!0,sm:2},"Email"),u.a.createElement(ne.a,{sm:10},u.a.createElement(A.a.Control,{ref:this.email,onChange:function(){return e.needSave()},type:"email",placeholder:"Email",defaultValue:this.props.user.email}))),u.a.createElement(A.a.Group,{as:ae.a,type:"email",controlId:"formHorizontalSMS"},u.a.createElement(A.a.Label,{column:!0,sm:2},"SMS"),u.a.createElement(ne.a,{sm:10},u.a.createElement(A.a.Control,{ref:this.sms,onChange:function(){return e.needSave()},placeholder:"SMS",defaultValue:this.props.user.sms}))))))))}}]),a}(u.a.Component)),re=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return u.a.createElement(L.a,{size:"lg",show:this.props.show,animation:!0,centered:!0,onHide:function(){e.props.toggleSelfie()}},u.a.createElement(L.a.Header,{closeButton:!0},u.a.createElement(p.a,{fluid:!0,roundedCircle:!0,style:{width:"40px",height:"40px"},src:"./images/users/"+this.props.user.user_id+".jpg"}),u.a.createElement("span",{style:{visibility:"hidden"}},"X"),u.a.createElement(L.a.Title,null,this.props.user.name+"'s new selfie"," ")),u.a.createElement(L.a.Body,null,u.a.createElement(F.a,{onTakePhoto:function(t){e.props.onTakePhoto(t)},imageType:z.IMAGE_TYPES.JPG,imageCompression:.97,isMaxResolution:!1})))}}]),a}(u.a.Component),oe=ie,se=(a(362),a(65)),le=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).adminPin=void 0,i.notifications=void 0,i.emailUserName=void 0,i.emailUserPassword=void 0,i.smtpServer=void 0,i.portNumber=void 0,i.ssl=void 0,i.domain=void 0,i.emailAlias=void 0,i.appURL=void 0,i.httpPort=void 0,i.httpsPort=void 0,i.userRefs=void 0,i.newName=void 0,i.newPIN=void 0,i.adminPin=u.a.createRef(),i.notifications=u.a.createRef(),i.emailUserName=u.a.createRef(),i.emailUserPassword=u.a.createRef(),i.smtpServer=u.a.createRef(),i.portNumber=u.a.createRef(),i.ssl=u.a.createRef(),i.domain=u.a.createRef(),i.emailAlias=u.a.createRef(),i.appURL=u.a.createRef(),i.httpPort=u.a.createRef(),i.httpsPort=u.a.createRef(),i.newName=u.a.createRef(),i.newPIN=u.a.createRef(),i.userRefs=[],i.state={changeConfig:!1,userChange:i.setRefs(),newChange:!1},i.needSave=i.needSave.bind(Object(r.a)(i)),i.updateConfig=i.updateConfig.bind(Object(r.a)(i)),i.updateUserInfo=i.updateUserInfo.bind(Object(r.a)(i)),i.userChange=i.userChange.bind(Object(r.a)(i)),i.newUser=i.newUser.bind(Object(r.a)(i)),i.deleteUserData=i.deleteUserData.bind(Object(r.a)(i)),i.setRefs=i.setRefs.bind(Object(r.a)(i)),i}return Object(i.a)(a,[{key:"setRefs",value:function(){this.userRefs=[];for(var e=[],t=0;t<this.props.users.length;t++)this.userRefs.push({name:u.a.createRef(),pin:u.a.createRef(),email:u.a.createRef(),sms:u.a.createRef(),notify:u.a.createRef()}),e.push(!1);return e}},{key:"needSave",value:function(){this.state.changeConfig||this.setState((function(){return{changeConfig:!0}}))}},{key:"newUser",value:function(){var e,t,a=this;if(this.newName.current.value.length&&this.newPIN.current.value.length){var n={user_id:-1,name:this.newName.current.value,pin:this.newPIN.current.value,email:"",sms:"",notify:!1};e=n,t=function(e){e?(a.userRefs.push({name:u.a.createRef(),pin:u.a.createRef(),email:u.a.createRef(),sms:u.a.createRef(),notify:u.a.createRef()}),a.state.userChange.push(!1),a.props.getUserData((function(){a.setState((function(){return{newChange:!1}}))}))):alert("Error adding user")},fetch("/endpoints/createuser",{method:"POST",headers:E,body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){t(e.success)}))}else alert("Please enter User Name and PIN")}},{key:"deleteUserData",value:function(e){var t,a,n=this;window.confirm("Delete "+this.props.users[e].name+" and all of "+this.props.users[e].name+"'s grocery list items?\n\nThis cannot be undone")&&(t=this.props.users[e],a=function(e){e?n.props.getUserData((function(){n.setState((function(){return{newChange:!1,userChange:n.setRefs()}}))})):alert("Error deleting user")},fetch("/endpoints/endpoints/deleteuser",{method:"DELETE",headers:E,body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){a(e.success)})))}},{key:"userChange",value:function(e){var t=this.state.userChange;t[e]=!0,this.setState((function(){return{userChange:t}}))}},{key:"updateUserInfo",value:function(e){var t=this,a={user_id:this.props.users[e].user_id,name:this.userRefs[e].name.current.value,pin:this.userRefs[e].pin.current.value,email:this.userRefs[e].email.current.value,sms:this.userRefs[e].sms.current.value,notify:this.userRefs[e].notify.current.checked};C(a,(function(a){if(a){var n=t.state.userChange;n[e]=!1,t.setState((function(){return{userChange:n}}))}}))}},{key:"updateConfig",value:function(e){var t=this;e.preventDefault();var a,n,i={configID:this.props.config.configID,adminPin:this.adminPin.current.value,notifications:this.notifications.current.checked,emailUserName:this.emailUserName.current.value,emailUserPassword:this.emailUserPassword.current.value,smtpServer:this.smtpServer.current.value,portNumber:parseInt(this.portNumber.current.value),ssl:this.ssl.current.checked,domain:this.domain.current.value,emailAlias:this.emailAlias.current.value,appURL:this.appURL.current.value,httpPort:parseInt(this.httpPort.current.value),httpsPort:parseInt(this.httpsPort.current.value)};a=i,n=function(e){e||alert("Error updating configuration"),t.props.logOff()},fetch("/endpoints/updateconfiginfo",{method:"PUT",headers:E,body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){e.success?n(!0):n(!1)}))}},{key:"componentWillUnmount",value:function(){this.props.logOff()}},{key:"render",value:function(){var e=this;return u.a.createElement(u.a.Fragment,null,u.a.createElement("br",null),u.a.createElement(x.a,{defaultActiveKey:"config",id:"main_tab"},u.a.createElement(_.a,{eventKey:"config",title:"Configuration"},u.a.createElement("div",{style:{width:"100%",textAlign:"center"}},u.a.createElement("div",{style:{width:"90%",display:"inline-block"}},u.a.createElement("br",null),u.a.createElement(A.a,{onSubmit:this.updateConfig},u.a.createElement(te.a,{bg:"light",style:{width:"100%",textAlign:"left"}},u.a.createElement(te.a.Header,null,u.a.createElement("div",{style:{width:"100%",display:"inline-block"}},u.a.createElement("div",{style:{display:"inline-block",textAlign:"left",width:"50%"}},u.a.createElement(p.a,{roundedCircle:!0,src:"/images/favicon.ico",style:{width:"40px",height:"40px",cursor:"pointer"}}),u.a.createElement("span",{style:{visibility:"hidden"}},"X"),u.a.createElement("span",{style:{fontWeight:"bold"}},"Settings")),u.a.createElement("div",{style:{display:"inline-block",width:"50%",textAlign:"right"}},u.a.createElement(A.a.Group,null,u.a.createElement(O.a,{onClick:function(){e.props.logOff()}}," Back"),u.a.createElement("span",{style:{visibility:"hidden"}},"  "),u.a.createElement(O.a,{disabled:!this.state.changeConfig,type:"submit"},"Save"))))),u.a.createElement(te.a.Body,null,u.a.createElement(A.a.Group,{as:ae.a,controlId:"formHorizontalAdminPin"},u.a.createElement(A.a.Label,{column:!0,sm:2},"Admin PIN"),u.a.createElement(ne.a,{sm:10},u.a.createElement(A.a.Control,{ref:this.adminPin,onChange:function(){return e.needSave()},placeholder:"Admin PIN",type:"password",defaultValue:this.props.config.adminPin}))),u.a.createElement(A.a.Group,{as:ae.a,controlId:"formNotifications"},u.a.createElement(ne.a,{sm:{span:10,offset:2}},u.a.createElement(A.a.Check,{ref:this.notifications,onChange:function(){return e.needSave()},label:"Enable User Notifications",defaultChecked:this.props.config.notifications}))),u.a.createElement(A.a.Group,{as:ae.a,controlId:"formEmailUserName"},u.a.createElement(A.a.Label,{column:!0,sm:2},"Source Email"),u.a.createElement(ne.a,{sm:10},u.a.createElement(A.a.Control,{ref:this.emailUserName,onChange:function(){return e.needSave()},type:"email",placeholder:"Source Email",defaultValue:this.props.config.emailUserName}))),u.a.createElement(A.a.Group,{as:ae.a,controlId:"formEmailUserPassword"},u.a.createElement(A.a.Label,{column:!0,sm:2},"Source Email Password"),u.a.createElement(ne.a,{sm:10},u.a.createElement(A.a.Control,{ref:this.emailUserPassword,onChange:function(){return e.needSave()},placeholder:"Source Email Password",type:"password",defaultValue:this.props.config.emailUserPassword}))),u.a.createElement(A.a.Group,{as:ae.a,controlId:"formsmtpServer"},u.a.createElement(A.a.Label,{column:!0,sm:2},"SMTP Server"),u.a.createElement(ne.a,{sm:10},u.a.createElement(A.a.Control,{ref:this.smtpServer,onChange:function(){return e.needSave()},placeholder:"SMTP Server",defaultValue:this.props.config.smtpServer}))),u.a.createElement(A.a.Group,{as:ae.a,controlId:"formportNumber"},u.a.createElement(A.a.Label,{column:!0,sm:2},"Port Number"),u.a.createElement(ne.a,{sm:10},u.a.createElement(A.a.Control,{ref:this.portNumber,onChange:function(){return e.needSave()},placeholder:"Port Number",defaultValue:this.props.config.portNumber+""}))),u.a.createElement(A.a.Group,{as:ae.a,controlId:"formssl"},u.a.createElement(ne.a,{sm:{span:10,offset:2}},u.a.createElement(A.a.Check,{ref:this.ssl,onChange:function(){return e.needSave()},label:"SSL",defaultChecked:this.props.config.ssl}))),u.a.createElement(A.a.Group,{as:ae.a,controlId:"formdomain"},u.a.createElement(A.a.Label,{column:!0,sm:2},"Domain"),u.a.createElement(ne.a,{sm:10},u.a.createElement(A.a.Control,{ref:this.domain,onChange:function(){return e.needSave()},placeholder:"Domain",defaultValue:this.props.config.domain}))),u.a.createElement(A.a.Group,{as:ae.a,controlId:"formemailAlias"},u.a.createElement(A.a.Label,{column:!0,sm:2},"Email Alias"),u.a.createElement(ne.a,{sm:10},u.a.createElement(A.a.Control,{ref:this.emailAlias,onChange:function(){return e.needSave()},placeholder:"Email Alias",defaultValue:this.props.config.emailAlias}))),u.a.createElement(A.a.Group,{as:ae.a,controlId:"formappURL"},u.a.createElement(A.a.Label,{column:!0,sm:2},"App URL"),u.a.createElement(ne.a,{sm:10},u.a.createElement(A.a.Control,{ref:this.appURL,onChange:function(){return e.needSave()},placeholder:"App URL",defaultValue:this.props.config.appURL}))),u.a.createElement(A.a.Group,{as:ae.a,controlId:"formhttpPort"},u.a.createElement(A.a.Label,{column:!0,sm:2},"HTTP Port"),u.a.createElement(ne.a,{sm:10},u.a.createElement(A.a.Control,{ref:this.httpPort,onChange:function(){return e.needSave()},placeholder:"HTTP Port",defaultValue:this.props.config.httpPort+""}))),u.a.createElement(A.a.Group,{as:ae.a,controlId:"formhttpsPort"},u.a.createElement(A.a.Label,{column:!0,sm:2},"HTTPS Port (Cert Required)"),u.a.createElement(ne.a,{sm:10},u.a.createElement(A.a.Control,{ref:this.httpsPort,onChange:function(){return e.needSave()},placeholder:"HTTPS Port",defaultValue:this.props.config.httpsPort+""}))))))))),u.a.createElement(_.a,{eventKey:"users",title:"Users"},u.a.createElement("div",{style:{width:"100%",textAlign:"center",alignContent:"center"}},u.a.createElement("div",{style:{width:"90%",display:"inline-block",textAlign:"center"}},u.a.createElement("br",null),u.a.createElement(te.a,{bg:"light",style:{width:"100%",textAlign:"left"}},u.a.createElement(te.a.Header,null,u.a.createElement("div",{style:{width:"100%",display:"inline-block"}},u.a.createElement("div",{style:{display:"inline-block",textAlign:"left",width:"50%"}},u.a.createElement(p.a,{roundedCircle:!0,src:"/images/favicon.ico",style:{width:"40px",height:"40px",cursor:"pointer"}}),u.a.createElement("span",{style:{visibility:"hidden"}},"X"),u.a.createElement("span",{style:{fontWeight:"bold"}},"Users")),u.a.createElement("div",{style:{display:"inline-block",width:"50%",textAlign:"right"}},u.a.createElement(A.a.Group,null,u.a.createElement(O.a,{onClick:function(){e.props.logOff()}}," Back"))))),u.a.createElement("br",null),u.a.createElement("div",{style:{width:"98%",alignSelf:"Center"}},this.props.users.map((function(t,a){return u.a.createElement(u.a.Fragment,null,u.a.createElement(te.a,{style:{width:"100%"},key:a},u.a.createElement(te.a.Img,{src:"./images/users/"+t.user_id+".jpg"}),u.a.createElement(te.a.Body,null,u.a.createElement(te.a.Title,null,t.name),u.a.createElement(te.a.Text,null,"Banana count for this month: "+se.emojify(":banana:")+"("+t.banana_count+")"),u.a.createElement(A.a,null,u.a.createElement(A.a.Group,{as:ae.a,controlId:"formUserName"},u.a.createElement(A.a.Label,{column:!0,sm:2},"User Name"),u.a.createElement(ne.a,{sm:10},u.a.createElement(A.a.Control,{ref:e.userRefs[a].name,onChange:function(){e.userChange(a)},placeholder:"User Name",defaultValue:t.name}))),u.a.createElement(A.a.Group,{as:ae.a,controlId:"formHorizontalPIN"},u.a.createElement(A.a.Label,{column:!0,sm:2},"PIN"),u.a.createElement(ne.a,{sm:10},u.a.createElement(A.a.Control,{ref:e.userRefs[a].pin,onChange:function(){e.userChange(a)},placeholder:"PIN",defaultValue:t.pin}))),u.a.createElement(A.a.Group,{as:ae.a,controlId:"formHorizontalCheck"},u.a.createElement(ne.a,{sm:{span:10,offset:2}},u.a.createElement(A.a.Check,{ref:e.userRefs[a].notify,onChange:function(){e.userChange(a)},label:"Grocery Monkey Notifications",defaultChecked:t.notify}))),u.a.createElement(A.a.Group,{as:ae.a,controlId:"formHorizontalEmail"},u.a.createElement(A.a.Label,{column:!0,sm:2},"Email"),u.a.createElement(ne.a,{sm:10},u.a.createElement(A.a.Control,{ref:e.userRefs[a].email,onChange:function(){e.userChange(a)},type:"email",placeholder:"Email",defaultValue:t.email}))),u.a.createElement(A.a.Group,{as:ae.a,type:"email",controlId:"formHorizontalSMS"},u.a.createElement(A.a.Label,{column:!0,sm:2},"SMS"),u.a.createElement(ne.a,{sm:10},u.a.createElement(A.a.Control,{ref:e.userRefs[a].sms,onChange:function(){e.userChange(a)},placeholder:"SMS",defaultValue:t.sms}))),u.a.createElement(O.a,{variant:"primary",onClick:function(){e.deleteUserData(a)}},"Delete "+t.name),u.a.createElement("span",{style:{visibility:"hidden"}},"    "),u.a.createElement(O.a,{variant:"primary",onClick:function(){e.updateUserInfo(a)},disabled:!e.state.userChange[a]},"Save Changes")))),u.a.createElement("br",null))})),u.a.createElement(te.a,{style:{width:"100%"}},u.a.createElement(te.a.Img,{src:"./images/users/new_user.png"}),u.a.createElement(te.a.Body,null,u.a.createElement(te.a.Title,null,"New User"),u.a.createElement(A.a,null,u.a.createElement(A.a.Group,{as:ae.a,controlId:"formUserName"},u.a.createElement(A.a.Label,{column:!0,sm:2},"User Name"),u.a.createElement(ne.a,{sm:10},u.a.createElement(A.a.Control,{ref:this.newName,onChange:function(){e.setState((function(){return{newChange:!0}}))},placeholder:"User Name"}))),u.a.createElement(A.a.Group,{as:ae.a,controlId:"formHorizontalPIN"},u.a.createElement(A.a.Label,{column:!0,sm:2},"PIN"),u.a.createElement(ne.a,{sm:10},u.a.createElement(A.a.Control,{ref:this.newPIN,onChange:function(){e.setState((function(){return{newChange:!0}}))},placeholder:"PIN"}))),u.a.createElement(O.a,{variant:"primary",onClick:function(){e.newUser()},disabled:!this.state.newChange},"Add User"))))))))),u.a.createElement(_.a,{eventKey:"items",title:"Items"},u.a.createElement("div",{style:{width:"100%",textAlign:"center",alignContent:"center"}},u.a.createElement("div",{style:{width:"90%",display:"inline-block"}},u.a.createElement("br",null),u.a.createElement(te.a,null,u.a.createElement(te.a.Header,null,u.a.createElement("div",{style:{width:"100%",display:"inline-block"}},u.a.createElement("div",{style:{display:"inline-block",textAlign:"left",width:"60%"}},u.a.createElement(p.a,{roundedCircle:!0,src:"/images/favicon.ico",style:{width:"40px",height:"40px",cursor:"pointer"}}),u.a.createElement("span",{style:{visibility:"hidden"}},"X"),u.a.createElement("span",{style:{fontWeight:"bold"}},"Item Cleanup")),u.a.createElement("div",{style:{display:"inline-block",width:"40%",textAlign:"right"}},u.a.createElement(A.a.Group,null,u.a.createElement(O.a,{onClick:function(){e.props.logOff()}}," Back")))))),u.a.createElement(X,{isAuthenticated:this.props.isAuthenticated})))),u.a.createElement(_.a,{eventKey:"emojis",title:"emojis"},u.a.createElement("div",{style:{width:"100%",textAlign:"center",alignContent:"center"}},u.a.createElement("div",{style:{width:"90%",display:"inline-block"}},u.a.createElement("br",null),u.a.createElement(te.a,null,u.a.createElement(te.a.Header,null,u.a.createElement("div",{style:{width:"100%",display:"inline-block"}},u.a.createElement("div",{style:{display:"inline-block",textAlign:"left",width:"60%"}},u.a.createElement(p.a,{roundedCircle:!0,src:"/images/favicon.ico",style:{width:"40px",height:"40px",cursor:"pointer"}}),u.a.createElement("span",{style:{visibility:"hidden"}},"X"),u.a.createElement("span",{style:{fontWeight:"bold"}},"emoji Lookup")),u.a.createElement("div",{style:{display:"inline-block",width:"40%",textAlign:"right"}},u.a.createElement(A.a.Group,null,u.a.createElement(O.a,{onClick:function(){e.props.logOff()}}," Back")))))),u.a.createElement(q,null))))))}}]),a}(u.a.Component),ce=function(e){var t=e.component,a=Object(l.a)(e,["component"]);return u.a.createElement(h.b,Object.assign({},a,{render:function(){return!0===e.isAuthenticated?u.a.createElement(t,e):u.a.createElement(h.a,{to:"/"})}}))},ue=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).state={auth:!1,user:{user_id:0,name:""},isAdmin:!1},i.authenticatePin=i.authenticatePin.bind(Object(r.a)(i)),i.logOff=i.logOff.bind(Object(r.a)(i)),i.updateUser=i.updateUser.bind(Object(r.a)(i)),i.getUserData=i.getUserData.bind(Object(r.a)(i)),i}return Object(i.a)(a,[{key:"logOff",value:function(){this.setState((function(){return{auth:!1,isAdmin:!1}}))}},{key:"authenticatePin",value:function(e,t){var a=this;!function(e,t){fetch("/endpoints/authenticateuser",{method:"POST",headers:E,body:JSON.stringify({pin:e})}).then((function(e){return e.json()})).then((function(e){t(e.success,e.user)}))}(e,function(e,n){!function(e){fetch("/endpoints/getconfiginfo",{method:"POST",headers:E}).then((function(e){return e.json()})).then((function(t){t.success?e(t.data):e({})}))}((function(i){j((function(r){a.setState((function(){return{auth:e,user:n,isAdmin:-1===n.user_id,config:i,users:r}})),t(e)}))}))}.bind(this))}},{key:"updateUser",value:function(e,t){var a=this;C(e,function(e){a.setState((function(){return{user:e}})),t()}.bind(this))}},{key:"getUserData",value:function(e){var t=this;j((function(a){t.setState((function(){return{users:a}}),e())}))}},{key:"render",value:function(){var e=this;return u.a.createElement(f.a,null,u.a.createElement(h.b,{exact:!0,path:"/",render:function(t){return u.a.createElement(w,Object.assign({},t,{isAuthenticated:e.state.auth,authenticatePin:e.authenticatePin,isAdmin:e.state.isAdmin,logOff:e.logOff}))}}),u.a.createElement(ce,{path:"/config",component:le,isAuthenticated:this.state.auth,isAdmin:this.state.isAdmin,logOff:this.logOff,config:this.state.config,users:this.state.users,getUserData:this.getUserData}),u.a.createElement(ce,{path:"/main",component:ee,isAuthenticated:this.state.auth,user:this.state.user,logOff:this.logOff}),u.a.createElement(ce,{path:"/user",component:oe,isAuthenticated:this.state.auth,user:this.state.user,updateUser:this.updateUser}))}}]),a}(u.a.Component);d.a.render(u.a.createElement(ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[171,1,2]]]);
//# sourceMappingURL=main.b5c897cb.chunk.js.map